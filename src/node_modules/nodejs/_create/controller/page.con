import * as potato from '@po-to/potato';

class Controller extends potato.Controller{
    Item(request: potato.Request, resolve: (data: Object | potato.ViewRendererData) => void, reject: (error: potato.PError) => void){
        let args = request.args || {};
        let insertHead: potato.Request = new potato.Request(request, 'www/common/InsertHead', 'Item', '', { title: (args['title'] || ""), keywords: (args['keywords'] || ''), description: (args['description'] || '') , mainJS: (args['mainJS'] || '`{PATH}`') });
        let insertFoot: potato.Request = new potato.Request(request, 'www/common/InsertFoot', 'Item');
        let content: potato.Request|string = args[potato.config.contentArg]?new potato.Request(request, args[potato.config.contentArg], 'Item'):"";
        let data = { insertHead: insertHead, insertFoot: insertFoot, content: content };
        let template = new potato.View('`{PATH}`Tpl');
        let result = new potato.ViewRendererData(template, data);
        resolve(result);
    }
}

let ins:Object = new Controller();
export = ins;